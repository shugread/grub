# grub 2.12 源码笔记


## 规定

1. 编译结果：.img 结尾的文件没有调试信息，.image 结尾的文件带调试信息
2. 模块文件：.mod 结尾的模块没有调试信息，.module 结尾的模块带调试信息

## 启动流程

开机后寄存器恢复默认值

```txt
CS: 0xf000
IP: 0xfff0
```
第一条执行的指令在`0xffff0`的位置，`0xffff0`是bios程序，bios在执行完各种自检后，检查磁盘的第一个扇区(512字节)的数据，如果第511个字节是`0x55`，512个字节是`0xaa`，就将第一个扇区加载到`0x7c00`的内存区域，并跳转到`0x7c00`的位置运行。

安装grub时,会将boot.img写入到第一个扇区(boot.img在x86环境下由`grub-core/boot/i386/pc/boot.S`编译成)
